<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fundamentos del Ingl√©s - EducaNIC</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --orange:#ff6600;
    --orange-dark:#cc4d00;
    --orange-light:#ff8533;
    --white:#ffffff;
    --muted:#fff7f0;
    --success:#28a745;
    --error:#e55353;
    --glass: rgba(255,255,255,0.85);
  }

  /* Reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:'Poppins',system-ui,Segoe UI,Arial;
    background:linear-gradient(180deg,#fff 0%, #fff8f2 100%);
    color:#333;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }

  /* Header */
  header{
    position:sticky;top:0;z-index:40;
    background: linear-gradient(90deg,var(--orange),var(--orange-light));
    padding:14px 20px;
    box-shadow: 0 6px 20px rgba(255,102,0,0.14);
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  header .brand{
    color:var(--white);
    font-weight:800;
    font-size:1.15rem;
    letter-spacing:0.6px;
  }
  header .actions{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .btn{
    background:transparent;border:2px solid rgba(255,255,255,0.18);color:var(--white);
    padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer;
    transition:all .18s ease;
  }
  .btn:hover{transform:translateY(-3px);box-shadow:0 6px 18px rgba(0,0,0,0.08)}
  .btn-reset{background:var(--white);color:var(--orange);border:2px solid rgba(255,255,255,0.06)}

  /* Main */
  main{flex:1;max-width:1100px;margin:28px auto;padding:0 18px 120px; width:100%}
  h1{font-size:2.4rem;color:var(--orange);text-align:center;margin-bottom:18px;font-weight:800;text-shadow:0 3px 8px rgba(255,102,0,0.08)}

  /* Grid */
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}

  /* Tema card */
  .tema{
    position:relative;
    background:var(--white);
    border-radius:16px;
    padding:20px;
    border:3px solid var(--orange);
    box-shadow: 0 20px 40px rgba(255,102,0,0.06);
    overflow:hidden;
    transition:transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s;
  }
  .tema.unlocked{transform:translateY(-6px); box-shadow: 0 28px 60px rgba(255,102,0,0.14)}
  .tema h2{color:var(--orange);font-size:1.3rem;margin-bottom:10px;font-weight:800}
  .tema p{color:#444;margin-bottom:14px}

  /* locked overlay */
  .lock-overlay{
    position:absolute;inset:0;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.75));
    display:flex;align-items:center;justify-content:center;flex-direction:column;
    gap:8px;border-radius:16px;
    pointer-events:auto;
    transition:opacity .25s, transform .25s;
  }
  .lock-overlay.hidden{opacity:0;pointer-events:none;transform:translateY(-6px)}
  .lock-icon{
    width:64px;height:64px;border-radius:16px;background:linear-gradient(180deg,var(--orange),var(--orange-dark));
    display:flex;align-items:center;justify-content:center;color:var(--white);font-size:28px;font-weight:800;box-shadow:0 8px 20px rgba(255,102,0,0.25)
  }
  .lock-text{font-weight:700;color:#7a4b2d}

  /* form elements */
  form{display:flex;flex-direction:column;gap:10px}
  label{font-weight:700;color:#333;font-size:.95rem}
  .inline-row{display:flex;gap:10px;flex-wrap:wrap}
  input[type=text], select{
    padding:10px 12px;border-radius:10px;border:2px solid var(--orange);font-size:1rem;
    background:var(--glass);outline:none;color: #333;
    transition:box-shadow .15s, border-color .15s;
  }
  input[type=text]:focus, select:focus{box-shadow:0 6px 18px rgba(255,102,0,0.12);border-color:var(--orange-dark)}

  .check-btn{
    background:linear-gradient(90deg,var(--orange),var(--orange-dark));
    color:var(--white);border:none;padding:10px 14px;border-radius:10px;font-weight:800;
    cursor:pointer;box-shadow: 0 10px 30px rgba(255,102,0,0.12);
    transition:transform .12s, box-shadow .12s;
  }
  .check-btn:active{transform:scale(.99)}
  .small-note{font-size:.9rem;color:#666}

  /* Toast / notification */
  .toast{
    position:fixed;right:20px;top:20px;z-index:60;min-width:260px;padding:12px 16px;border-radius:12px;color:#fff;font-weight:700;
    box-shadow:0 12px 30px rgba(0,0,0,0.18);transform:translateX(120%);opacity:0;transition:all .44s cubic-bezier(.2,.9,.3,1);
  }
  .toast.show{transform:none;opacity:1}
  .toast.success{background:linear-gradient(90deg,#24c46a,#43d17c)}
  .toast.error{background:linear-gradient(90deg,#ff6b6b,#ffb199)}

  /* unlock flash */
  .flash{
    position:absolute;inset:-20px;background:radial-gradient(circle at 20% 10%, rgba(255,255,255,0.45), rgba(255,255,255,0) 20%);pointer-events:none;opacity:0;transform:scale(.95);transition:all .45s;
  }
  .flash.on{opacity:1;transform:scale(1.03);box-shadow:0 0 50px rgba(255,165,0,0.18)}

  /* confetti container */
  #confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:70;overflow:hidden}

  /* footer */
  footer{
    position:fixed;left:0;right:0;bottom:0;padding:12px 18px;background:linear-gradient(90deg,var(--orange-dark),var(--orange));
    color:var(--white);display:flex;justify-content:center;gap:14px;font-weight:600;z-index:30;
    box-shadow:0 -6px 20px rgba(255,102,0,0.12)
  }

  /* responsive tweaks */
  @media(max-width:600px){
    header{padding:12px}
    h1{font-size:1.8rem}
    .grid{grid-template-columns:1fr}
  }

</style>
</head>
<body>

<header>
  <div class="brand">EducaNIC ‚Äî Fundamentos Ingl√©s</div>
  <div class="actions">
    <button class="btn" id="btnReset" title="Resetear progreso (pruebas)">Reset progreso</button>
    <a class="btn" href="index.html" aria-label="Ir a inicio">Inicio</a>
  </div>
</header>

<main>
  <h1 tabindex="0">Fundamentos del Ingl√©s ‚Äî Bloqueos progresivos</h1>

  <div class="grid" id="gridTemas">
    <!-- Tema 1 -->
    <article class="tema" data-tema="1" aria-labelledby="t1">
      <div class="flash" id="flash-1"></div>
      <h2 id="t1">1. El abecedario</h2>
      <p>Relaciona la letra con su pronunciaci√≥n escrita. Escribe la transcripci√≥n (forma escrita simple) en la caja junto a cada letra.</p>

      <form data-tema="1" class="form-tema">
        <div class="inline-row">
          <label for="a-pron">A ‚Äî</label>
          <input id="a-pron" data-letter="a" type="text" placeholder="ej: ei" autocomplete="off" />
        </div>
        <div class="inline-row">
          <label for="b-pron">B ‚Äî</label>
          <input id="b-pron" data-letter="b" type="text" placeholder="ej: bi" autocomplete="off" />
        </div>
        <div class="inline-row">
          <label for="c-pron">C ‚Äî</label>
          <input id="c-pron" data-letter="c" type="text" placeholder="ej: si" autocomplete="off" />
        </div>

        <div class="inline-row">
          <button type="submit" class="check-btn" aria-label="Verificar tema 1">Verificar</button>
          <div class="small-note" id="note1">Completa correctamente para desbloquear el siguiente.</div>
        </div>
      </form>

      <div class="lock-overlay hidden" id="overlay-1" aria-hidden="true">
        <div class="lock-icon">üîì</div>
        <div class="lock-text">Tema desbloqueado</div>
      </div>
    </article>
    <!-- Tema 2 -->
    <article class="tema locked" data-tema="2" aria-labelledby="t2">
      <div class="flash" id="flash-2"></div>
      <h2 id="t2">2. Saludos y despedidas</h2>
      <p>Completa la frase: "Hello, how ____ you?"</p>

      <form data-tema="2" class="form-tema">
        <input id="inputSaludo" type="text" placeholder="are" autocomplete="off" />
        <div style="display:flex;gap:10px;margin-top:8px;align-items:center">
          <button type="submit" class="check-btn">Verificar</button>
          <div class="small-note">Responde correctamente para seguir.</div>
        </div>
      </form>

      <div class="lock-overlay" id="overlay-2" aria-hidden="false">
        <div class="lock-icon">üîí</div>
        <div class="lock-text">Bloqueado ‚Äî completa el tema anterior</div>
      </div>
    </article>

    <!-- Tema 3 -->
    <article class="tema locked" data-tema="3" aria-labelledby="t3">
      <div class="flash" id="flash-3"></div>
      <h2 id="t3">3. Presentarte y conocer a otros</h2>
      <p>Completa la frase: "My name ____ John."</p>

      <form data-tema="3" class="form-tema">
        <input id="inputPresentacion" type="text" placeholder="is" autocomplete="off" />
        <div style="display:flex;gap:10px;margin-top:8px;align-items:center">
          <button type="submit" class="check-btn">Verificar</button>
          <div class="small-note">Cuando lo logres seguir√°s al siguiente.</div>
        </div>
      </form>

      <div class="lock-overlay" id="overlay-3" aria-hidden="false">
        <div class="lock-icon">üîí</div>
        <div class="lock-text">Bloqueado</div>
      </div>
    </article>

    <!-- Tema 4 -->
    <article class="tema locked" data-tema="4" aria-labelledby="t4">
      <div class="flash" id="flash-4"></div>
      <h2 id="t4">4. Pronombres personales</h2>
      <p>Selecciona el pronombre adecuado para "Sara and I":</p>

      <form data-tema="4" class="form-tema">
        <select id="inputPronombre" aria-label="Seleccionar pronombre">
          <option value="">--Seleccione--</option>
          <option value="we">We</option>
          <option value="they">They</option>
          <option value="you">You</option>
        </select>
        <div style="display:flex;gap:10px;margin-top:8px;align-items:center">
          <button type="submit" class="check-btn">Verificar</button>
          <div class="small-note">Pista: incluye a la persona que habla.</div>
        </div>
      </form>

      <div class="lock-overlay" id="overlay-4" aria-hidden="false">
        <div class="lock-icon">üîí</div>
        <div class="lock-text">Bloqueado</div>
      </div>
    </article>

    <!-- Tema 5 -->
    <article class="tema locked" data-tema="5" aria-labelledby="t5">
      <div class="flash" id="flash-5"></div>
      <h2 id="t5">5. Pronunciaci√≥n de vocales y consonantes</h2>
      <p>Escribe la pronunciaci√≥n (forma escrita simple) de cada vocal en su campo correspondiente.</p>

      <form data-tema="5" class="form-tema">
        <div class="inline-row">
          <label for="v-a">A</label><input id="v-a" data-vowel="a" type="text" placeholder="ej: ei" />
        </div>
        <div class="inline-row">
          <label for="v-e">E</label><input id="v-e" data-vowel="e" type="text" placeholder="ej: i" />
        </div>
        <div class="inline-row">
          <label for="v-i">I</label><input id="v-i" data-vowel="i" type="text" placeholder="ej: ai" />
        </div>

        <div style="display:flex;gap:10px;margin-top:8px;align-items:center">
          <button type="submit" class="check-btn">Verificar</button>
          <div class="small-note">√öltimo tema de este bloque.</div>
        </div>
      </form>

      <div class="lock-overlay" id="overlay-5" aria-hidden="false">
        <div class="lock-icon">üîí</div>
        <div class="lock-text">Bloqueado</div>
      </div>
    </article>
  </div>
</main>

<!-- Confetti container -->
<div id="confetti" aria-hidden="true"></div>

<!-- Toast -->
<div id="toast" class="toast" role="status" aria-live="polite"></div>

<footer>
  üìû <a href="https://wa.me/50581294177" target="_blank" rel="noopener" style="color:inherit;text-decoration:none">8129-4177</a> |
  ‚úâÔ∏è <a href="mailto:jackarauz2008@gmail.com" style="color:inherit;text-decoration:none">jackarauz2008@gmail.com</a> ‚Äî
  EDUCANIC ¬© 2025
</footer>

<script>
/* ---------------------------
  Gesti√≥n de progreso seguro
  --------------------------- */
const PROGRESS_KEY = 'eduCanicFundamentosProgreso_v2';
// Si existe progreso en localStorage, usarlo; si no, crear progreso inicial con solo 1 desbloqueado.
let progreso = JSON.parse(localStorage.getItem(PROGRESS_KEY) || 'null');
if (!progreso || typeof progreso !== 'object') {
  progreso = { '1': true }; // solo tema 1 desbloqueado
  localStorage.setItem(PROGRESS_KEY, JSON.stringify(progreso));
}

/* utilidades DOM */
const temas = Array.from(document.querySelectorAll('.tema'));
const toast = document.getElementById('toast');
const confettiContainer = document.getElementById('confetti');
const frases = [
  "¬°Incre√≠ble! üî• Sigue as√≠.",
  "¬°Perfecto! üí™ Vas por muy buen camino.",
  "¬°Genial! üåü Desbloqueaste el siguiente.",
  "¬°Buen trabajo! üëè No te detengas.",
  "¬°Excelente! üöÄ"
];

/* Mostrar toast */
function showToast(message, type='success'){
  toast.textContent = message;
  toast.className = 'toast show ' + (type==='success' ? 'success' : 'error');
  setTimeout(()=>{ toast.className = 'toast'; }, 3000);
}

/* Confetti sencillo: genera peque√±os spans animados */
function burstConfetti(){
  const count = 28;
  for(let i=0;i<count;i++){
    const el = document.createElement('span');
    el.textContent = ['üéâ','‚ú®','üéà','üéä'][Math.floor(Math.random()*4)];
    el.style.position = 'absolute';
    el.style.left = Math.random()*100 + '%';
    el.style.top = Math.random()*10 + '%';
    el.style.fontSize = (10 + Math.random()*18) + 'px';
    el.style.opacity = '0';
    el.style.transform = `translateY(-20px) rotate(${Math.random()*360}deg)`;
    el.style.transition = `all ${0.9 + Math.random()*0.8}s cubic-bezier(.2,.9,.3,1)`;
    confettiContainer.appendChild(el);
    // trigger
    requestAnimationFrame(()=> {
      el.style.opacity = '1';
      el.style.top = (40 + Math.random()*60) + '%';
      el.style.transform = `translateY(0) rotate(${Math.random()*720}deg)`;
    });
    setTimeout(()=> el.remove(), 2000 + Math.random()*1200);
  }
}

/* Actualizar UI segun progreso */
function actualizarUI(){
  temas.forEach(t => {
    const n = t.dataset.tema;
    const overlay = t.querySelector('.lock-overlay');
    const form = t.querySelector('form');
    const flash = t.querySelector('.flash');
    if (progreso[n]) {
      t.classList.add('unlocked');
      t.classList.remove('locked');
      if (overlay) { overlay.classList.add('hidden'); overlay.setAttribute('aria-hidden','true'); }
      // habilitar controles
      if (form) {
        Array.from(form.querySelectorAll('input,select,button')).forEach(el=>{
          el.disabled = false;
        });
      }
      // small unlocked marker
      if (flash) { flash.classList.remove('on'); } // reset
    } else {
      t.classList.remove('unlocked');
      t.classList.add('locked');
      if (overlay) { overlay.classList.remove('hidden'); overlay.setAttribute('aria-hidden','false'); }
      if (form) {
        Array.from(form.querySelectorAll('input,select,button')).forEach(el=>{
          // keep the submit button disabled so user can't submit locked forms
          if (el.tagName.toLowerCase() === 'button') el.disabled = true;
          else el.disabled = true;
        });
      }
    }
  });
}

/* Marca tema como completado (no marcar el siguiente sin validar) */
function marcarCompleto(n){
  progreso[n] = true;
  localStorage.setItem(PROGRESS_KEY, JSON.stringify(progreso));
}

/* Desbloquea el siguiente tema con animaci√≥n */
function desbloquearSiguiente(n){
  const siguiente = Number(n) + 1;
  const temaElem = document.querySelector(`.tema[data-tema="${siguiente}"]`);
  if (!temaElem) return;
  if (progreso[String(siguiente)]) return; // ya desbloqueado
  // desbloquear visiblemente
  progreso[String(siguiente)] = true;
  localStorage.setItem(PROGRESS_KEY, JSON.stringify(progreso));
  // flash & confetti
  const flash = temaElem.querySelector('.flash');
  if (flash){ flash.classList.add('on'); setTimeout(()=> flash.classList.remove('on'),700); }
  temaElem.classList.add('unlocked');
  const overlay = temaElem.querySelector('.lock-overlay');
  if (overlay) overlay.classList.add('hidden');
  // confetti + toast
  burstConfetti();
  showToast(frases[Math.floor(Math.random()*frases.length)], 'success');
  // enable controls
  const form = temaElem.querySelector('form');
  if (form){
    Array.from(form.querySelectorAll('input,select,button')).forEach(el=>{
      el.disabled = false;
    });
  }
}

/* Resetea progreso (para pruebas) */
document.getElementById('btnReset').addEventListener('click', ()=>{
  if (!confirm('¬øResetear progreso y bloquear todo excepto el Tema 1?')) return;
  progreso = {'1': true};
  localStorage.setItem(PROGRESS_KEY, JSON.stringify(progreso));
  actualizarUI();
  showToast('Progreso reiniciado', 'error');
});

/* ---------------------------
  Validaciones de cada tema
   - Solo se permite enviar si tema est√° desbloqueado
----------------------------*/
function validarTema(n, values){
  // valores esperados (normalizados)
  if (n===1){
    // a -> "ei", b -> "bi", c -> "si"
    const a = (values['a']||'').trim().toLowerCase();
    const b = (values['b']||'').trim().toLowerCase();
    const c = (values['c']||'').trim().toLowerCase();
    return a==='ei' && b==='bi' && c==='si';
  }
  if (n===2){
    return (values['saludo']||'').trim().toLowerCase() === 'are';
  }
  if (n===3){
    return (values['present']||'').trim().toLowerCase() === 'is';
  }
  if (n===4){
    return (values['pron']||'') === 'we';
  }
  if (n===5){
    // check a,e,i fields non-empty and reasonable (simple)
    const va = (values['va']||'').trim().toLowerCase();
    const ve = (values['ve']||'').trim().toLowerCase();
    const vi = (values['vi']||'').trim().toLowerCase();
    // Accept some common simple transcriptions: a: ei, e: i or e, i: ai or i
    const okA = ['ei','a'].includes(va);
    const okE = ['i','e'].includes(ve);
    const okI = ['ai','i'].includes(vi);
    return okA && okE && okI;
  }
  return false;
}

/* Manejo submit forms */
document.querySelectorAll('.form-tema').forEach(form=>{
  form.addEventListener('submit', e=>{
    e.preventDefault();
    const temaN = Number(form.dataset.tema);
    // check unlocked status
    if (!progreso[String(temaN)]) {
      showToast('Debes completar el tema anterior primero.', 'error');
      return;
    }
    // gather values depending on tema
    const values = {};
    if (temaN === 1){
      values['a'] = form.querySelector('#a-pron').value;
      values['b'] = form.querySelector('#b-pron').value;
      values['c'] = form.querySelector('#c-pron').value;
    } else if (temaN === 2){
      values['saludo'] = form.querySelector('#inputSaludo').value;
    } else if (temaN === 3){
      values['present'] = form.querySelector('#inputPresentacion').value;
    } else if (temaN === 4){
      values['pron'] = form.querySelector('#inputPronombre').value;
    } else if (temaN === 5){
      values['va'] = form.querySelector('#v-a').value;
      values['ve'] = form.querySelector('#v-e').value;
      values['vi'] = form.querySelector('#v-i').value;
    }

    const correcto = validarTema(temaN, values);
    if (correcto){
      // marcar completado y desbloquear siguiente
      marcarCompleto(String(temaN));
      // show success
      burstConfetti();
      showToast(frases[Math.floor(Math.random()*frases.length)], 'success');
      // animate flash on current
      const current = document.querySelector(`.tema[data-tema="${temaN}"]`);
      const flashElem = current.querySelector('.flash');
      if (flashElem){ flashElem.classList.add('on'); setTimeout(()=>flashElem.classList.remove('on'),700); }
      // enable next after short delay for UX
      setTimeout(()=> desbloquearSiguiente(String(temaN)), 650);
    } else {
      // incorrecto -> shake + toast
      const card = document.querySelector(`.tema[data-tema="${temaN}"]`);
      card.animate([
        { transform: 'translateX(0px)' },
        { transform: 'translateX(-8px)' },
        { transform: 'translateX(8px)' },
        { transform: 'translateX(0px)' }
      ], { duration: 360, easing: 'ease-in-out' });
      showToast('‚ùå Incorrecto, int√©ntalo otra vez. T√∫ puedes üí°', 'error');
    }
  });
});

/* Al cargar */
actualizarUI();
</script>

</body>
</html>

